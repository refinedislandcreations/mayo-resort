<header
  class="bg-custom-blue bg-opacity-80 shadow-md w-full fixed top-0 z-50 h-[123px] flex items-center"
>
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 flex items-center h-full">
    <div class="flex justify-between items-center w-full">
      <!-- Logo -->
      <div class="flex-shrink-0">
        <a href="{{ '/index.html' | relative_url }}">
          <img
            src="{{ '/assets/images/logo.png' | relative_url }}"
            alt="Logo"
            class="h-10 w-auto"
          />
        </a>
      </div>

      <!-- Desktop Menu -->
      <nav
        class="hidden xl:flex space-x-8 items-center uppercase font-bold h-full"
      >
        <!-- Room Dropdown -->
        <div class="relative group h-full flex items-center">
          <button
            class="inline-flex items-center hover:text-baby-powder-hover focus:outline-none text-baby-powder uppercase font-bold text-xl tracking-widest"
          >
            Rooms
            <svg
              class="ml-1 h-4 w-4 fill-current"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
            >
              <path d="M5.5 7l4.5 4.5 4.5-4.5z" />
            </svg>
          </button>
          <div
            class="absolute left-0 top-full bg-custom-blue bg-opacity-80 border-none rounded-none shadow-lg opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-opacity duration-200 z-20 text-xl tracking-widest whitespace-nowrap"
            style="margin-top: 0"
          >
            <a
              href="{{ '/room-types' | relative_url }}"
              class="block px-4 py-2 text-baby-powder hover:bg-custom-blue-hover"
              >Room Types</a
            >
            <a
              href="{{ '/special-offer' | relative_url }}"
              class="block px-4 py-2 text-baby-powder hover:bg-custom-blue-hover"
              >Special Offer</a
            >
            <a
              href="{{ '/group-stays' | relative_url }}"
              class="block px-4 py-2 text-baby-powder hover:bg-custom-blue-hover"
              >Group Stays</a
            >
          </div>
        </div>

        <!-- Restaurant Dropdown -->
        <div class="relative group h-full flex items-center">
          <button
            class="inline-flex items-center text-baby-powder hover:text-baby-powder-hover focus:outline-none uppercase font-bold text-xl tracking-widest"
          >
            Restaurant
            <svg
              class="ml-1 h-4 w-4 fill-current"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
            >
              <path d="M5.5 7l4.5 4.5 4.5-4.5z" />
            </svg>
          </button>
          <div
            class="absolute left-0 top-full bg-custom-blue bg-opacity-80 border-none rounded-none shadow-lg opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-opacity duration-200 z-20 text-xl tracking-widest whitespace-nowrap"
            style="margin-top: 0"
          >
            <a
              href="{{ '/special-events' | relative_url }}"
              class="block px-4 py-2 text-baby-powder hover:bg-custom-blue-hover"
              >Special Events</a
            >
          </div>
        </div>

        <!-- Weddings -->
        <a
          href="{{ '/weddings' | relative_url }}"
          class="text-baby-powder hover:text-baby-powder-hover px-3 py-2 text-xl tracking-widest"
          >Weddings</a
        >

        <!-- Activities Dropdown -->
        <div class="relative group h-full flex items-center">
          <button
            class="inline-flex items-center text-baby-powder hover:text-baby-powder-hover focus:outline-none uppercase font-bold text-xl tracking-widest"
          >
            Activities
            <svg
              class="ml-1 h-4 w-4 fill-current"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
            >
              <path d="M5.5 7l4.5 4.5 4.5-4.5z" />
            </svg>
          </button>
          <div
            class="absolute left-0 top-full bg-custom-blue bg-opacity-80 border-none rounded-none shadow-lg opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-opacity duration-200 z-20 text-xl tracking-widest whitespace-nowrap"
            style="margin-top: 0"
          >
            <a
              href="{{ '/near-mayo' | relative_url }}"
              class="block px-4 py-2 text-baby-powder hover:bg-custom-blue-hover"
              >Near Mayo</a
            >
            <a
              href="{{ '/north-bali' | relative_url }}"
              class="block px-4 py-2 text-baby-powder hover:bg-custom-blue-hover"
              >North Bali</a
            >
          </div>
        </div>

        <!-- Contact Dropdown -->
        <div class="relative group h-full flex items-center">
          <button
            class="inline-flex items-center text-baby-powder hover:text-baby-powder-hover focus:outline-none uppercase font-bold text-xl tracking-widest"
          >
            Contact
            <svg
              class="ml-1 h-4 w-4 fill-current"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
            >
              <path d="M5.5 7l4.5 4.5 4.5-4.5z" />
            </svg>
          </button>
          <div
            class="absolute left-0 top-full bg-custom-blue bg-opacity-80 border-none rounded-none shadow-lg opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-opacity duration-200 z-20 text-xl tracking-widest whitespace-nowrap"
            style="margin-top: 0"
          >
            <a
              href="{{ '/contact-form' | relative_url }}"
              class="block px-4 py-2 text-baby-powder hover:bg-custom-blue-hover"
              >Contact Form</a
            >
            <a
              href="{{ '/getting-here' | relative_url }}"
              class="block px-4 py-2 text-baby-powder hover:bg-custom-blue-hover"
              >Getting Here</a
            >
          </div>
        </div>

        <!-- Book Now Button -->
        <a
          href="{{ '/booking' | relative_url }}"
          class="ml-4 inline-block bg-keppel text-white px-[20px] py-[15px] hover:bg-keppel-hover transition font-bold text-xl tracking-widest"
          >Book Now</a
        >
      </nav>

      <!-- Mobile Hamburger -->
      <div class="xl:hidden flex items-center space-x-4">
        <!-- Hamburger button -->
        <button
          id="mobile-menu-button"
          aria-label="Toggle menu"
          class="text-baby-powder focus:outline-none"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <line x1="3" y1="6" x2="21" y2="6" />
            <line x1="3" y1="12" x2="21" y2="12" />
            <line x1="3" y1="18" x2="21" y2="18" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Mobile Menu -->
    <nav
      id="mobile-menu"
      class="fixed inset-0 bg-custom-blue z-40 flex flex-col p-6 xl:hidden transform translate-x-full transition-transform duration-500 ease-in-out"
    >
      <!-- Close button -->
      <button
        id="close-menu-button"
        class="absolute top-10 right-6 text-baby-powder hover:text-baby-powder-hover focus:outline-none"
        aria-label="Close menu"
      >
        <svg
          class="w-8 h-8"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          viewBox="0 0 24 24"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </button>

      <!-- Menu Items -->
      <div
        class="flex flex-col space-y-6 mt-20 uppercase font-bold text-baby-powder text-xl"
      >
        <div class="flex-shrink-0">
          <a href="{{ '/index.html' | relative_url }}">
            <img
              src="{{ '/assets/images/logo.png' | relative_url }}"
              alt="Logo"
              class="h-10 w-auto mx-auto"
            />
          </a>
        </div>
        <details class="dropdown">
          <summary
            class="cursor-pointer py-2 hover:text-baby-powder-hover flex items-center justify-between tracking-widest"
          >
            <span>Rooms</span>
            <svg
              class="w-4 h-4 ml-2 transform transition-transform duration-300"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              aria-hidden="true"
              focusable="false"
            >
              <path d="M19 9l-7 7-7-7"></path>
            </svg>
          </summary>

          <div class="dropdown-content overflow-hidden">
            <ul class="pl-4 space-y-2 mt-2">
              <li>
                <a
                  href="{{ '/room-types' | relative_url }}"
                  class="block hover:text-baby-powder-hover pb-2 tracking-widest"
                  >Room Types</a
                >
              </li>
              <li>
                <a
                  href="{{ '/special-offer' | relative_url }}"
                  class="block hover:text-baby-powder-hover pb-2 tracking-widest"
                  >Special Offer</a
                >
              </li>
              <li>
                <a
                  href="{{ '/group-stays' | relative_url }}"
                  class="block hover:text-baby-powder-hover pb-2 tracking-widest"
                  >Group Stays</a
                >
              </li>
            </ul>
          </div>
        </details>

        <details class="dropdown">
          <summary
            class="cursor-pointer py-2 hover:text-baby-powder-hover flex items-center justify-between tracking-widest"
          >
            <span>Restaurant</span>
            <svg
              class="w-4 h-4 ml-2 transform transition-transform duration-300"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              aria-hidden="true"
              focusable="false"
            >
              <path d="M19 9l-7 7-7-7"></path>
            </svg>
          </summary>

          <div class="dropdown-content overflow-hidden">
            <ul class="pl-4 space-y-2 mt-2">
              <li>
                <a
                  href="{{ '/special-events' | relative_url }}"
                  class="block hover:text-baby-powder-hover pb-2 tracking-widest"
                  >Special Events</a
                >
              </li>
            </ul>
          </div>
        </details>

        <a
          href="{{ '/weddings' | relative_url }}"
          class="block py-2 hover:text-baby-powder-hover tracking-widest"
          >Weddings</a
        >

        <details class="dropdown">
          <summary
            class="cursor-pointer py-2 hover:text-baby-powder-hover flex items-center justify-between tracking-widest"
          >
            <span>Activities</span>
            <svg
              class="w-4 h-4 ml-2 transform transition-transform duration-300"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              aria-hidden="true"
              focusable="false"
            >
              <path d="M19 9l-7 7-7-7"></path>
            </svg>
          </summary>

          <div class="dropdown-content overflow-hidden">
            <ul class="pl-4 space-y-2 mt-2">
              <li>
                <a
                  href="{{ '/near-mayo' | relative_url }}"
                  class="block hover:text-baby-powder-hover pb-2 tracking-widest"
                  >Near Mayo</a
                >
              </li>
              <li>
                <a
                  href="{{ '/north-bali' | relative_url }}"
                  class="block hover:text-baby-powder-hover pb-2 tracking-widest"
                  >North Bali</a
                >
              </li>
            </ul>
          </div>
        </details>

        <details class="dropdown">
          <summary
            class="cursor-pointer py-2 hover:text-baby-powder-hover flex items-center justify-between tracking-widest"
          >
            <span>Contact</span>
            <svg
              class="w-4 h-4 ml-2 transform transition-transform duration-300"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              aria-hidden="true"
              focusable="false"
            >
              <path d="M19 9l-7 7-7-7"></path>
            </svg>
          </summary>

          <div class="dropdown-content overflow-hidden">
            <ul class="pl-4 space-y-2 mt-2">
              <li>
                <a
                  href="{{ '/contact-form' | relative_url }}"
                  class="block hover:text-baby-powder-hover pb-2 tracking-widest"
                  >Contact Form</a
                >
              </li>
              <li>
                <a
                  href="{{ '/getting-here' | relative_url }}"
                  class="block hover:text-baby-powder-hover pb-2 tracking-widest"
                  >Getting Here</a
                >
              </li>
            </ul>
          </div>
        </details>

        <div class="text-left">
          <a
            href="{{ '/booking' | relative_url }}"
            class="inline-block bg-keppel px-[20px] py-[15px] hover:bg-keppel-hover transition font-bold"
          >
            Book Now
          </a>
        </div>
      </div>

      <!-- Social Icons -->
      <div class="flex space-x-3 justify-start pt-6">
        <a
          href="{{ 'https://instagram.com/yourprofile' | relative_url }}"
          target="_blank"
          class="text-baby-powder hover:text-baby-powder-hover"
        >
          <img
            src="{{ '/assets/images/icons/instagram-icon.png' | relative_url }}"
            alt="Logo"
            class="h-5 w-auto"
          />
        </a>
        <a
          href="{{ 'https://facebook.com/yourprofile' | relative_url }}"
          target="_blank"
          class="text-baby-powder hover:text-baby-powder-hover"
        >
          <img
            src="{{ '/assets/images/icons/facebook-icon.png' | relative_url }}"
            alt="Logo"
            class="h-5 w-auto"
          />
        </a>
      </div>
    </nav>
  </div>

  <script>
    // Mobile menu toggle
    const btn = document.getElementById("mobile-menu-button");
    const closeBtn = document.getElementById("close-menu-button");
    const menu = document.getElementById("mobile-menu");

    btn.addEventListener("click", () => {
      menu.classList.remove("translate-x-full");
      menu.classList.add("translate-x-0");
    });

    closeBtn.addEventListener("click", () => {
      menu.classList.add("translate-x-full");
      menu.classList.remove("translate-x-0");
    });

    // Desktop dropdowns: keep open on hover/click, close only when mouse leaves dropdown area
    document.querySelectorAll(".md\\:flex .group").forEach(function (dropdown) {
      let timeout;
      const menu = dropdown.querySelector("div.absolute");
      if (!menu) return;

      // Show on hover
      dropdown.addEventListener("mouseenter", function () {
        clearTimeout(timeout);
        menu.classList.add("opacity-100", "visible");
        menu.classList.remove("opacity-0", "invisible");
      });
      // Hide on mouseleave (with slight delay for usability)
      dropdown.addEventListener("mouseleave", function () {
        timeout = setTimeout(function () {
          menu.classList.remove("opacity-100", "visible");
          menu.classList.add("opacity-0", "invisible");
        }, 120);
      });
      // Also allow click to toggle
      dropdown.querySelector("button").addEventListener("click", function (e) {
        e.preventDefault();
        if (menu.classList.contains("opacity-100")) {
          menu.classList.remove("opacity-100", "visible");
          menu.classList.add("opacity-0", "invisible");
        } else {
          menu.classList.add("opacity-100", "visible");
          menu.classList.remove("opacity-0", "invisible");
        }
      });
      // Prevent menu from closing if mouse moves from button to menu quickly
      menu.addEventListener("mouseenter", function () {
        clearTimeout(timeout);
      });
      menu.addEventListener("mouseleave", function () {
        timeout = setTimeout(function () {
          menu.classList.remove("opacity-100", "visible");
          menu.classList.add("opacity-0", "invisible");
        }, 120);
      });
    });

    // Mobile dropdowns with slide animation
    document.querySelectorAll("details.dropdown").forEach((el) => {
      const summary = el.querySelector("summary");
      const content = el.querySelector(".dropdown-content");
      const icon = summary.querySelector("svg");

      // Tutup default <details>
      el.addEventListener("toggle", (e) => {
        if (el.open) {
          // OPEN → animasi slide down
          content.style.maxHeight = content.scrollHeight + "px";
          content.style.opacity = "1";
          icon.classList.add("rotate-180");
        } else {
          // CLOSE → animasi slide up
          content.style.maxHeight = content.scrollHeight + "px"; // set dulu tinggi penuh
          requestAnimationFrame(() => {
            content.style.maxHeight = "0px";
            content.style.opacity = "0";
          });
          icon.classList.remove("rotate-180");
        }
      });

      // Reset inline style setelah selesai animasi supaya fleksibel
      content.addEventListener("transitionend", () => {
        if (el.open) {
          content.style.maxHeight = "none"; // biar fleksibel dengan isi
        }
      });
    });
  </script>
</header>
