<section class="container mx-auto px-4 sm:px-6 lg:px-12 xl:px-20 py-10 sm:py-16 lg:py-24">
  <h2 class="title pb-2p" id="overview">Let's Get To The Fun Part</h2>
  <div class="folder-accordion-container">
    {% for category in site.data.meal-plans.categories %}
    {% assign cat_id = category.name | downcase | strip | replace: ' ', '-' %}
    {% assign cat_name_down = category.name | downcase | strip %}
    <div class="folder" id="{{ cat_id }}">
      <!-- Folder Tab -->
      <div class="folder-tab" data-folder="{{ cat_id }}">{{ category.name }}</div>
      
      <!-- Folder Content -->
      <div class="folder-content" id="{{ cat_id }}-content">
        <!-- Category Description -->
        <div class="leading-relaxed lg:columns-2 lg:gap-8 mb-8">
          <p>{{ category.description | default: "Explore our curated menu for this category." }}</p>
        </div>

        <!-- Week Tabs -->
        <div class="tabs-container">
          {% assign category_weeks = "" | split: "" %}
          {% for week in site.data.meal-plans.weeks %}
            {% assign week_cat_down = week.category | downcase | strip %}
            {% if week_cat_down == cat_name_down %}
              {% assign category_weeks = category_weeks | push: week %}
            {% endif %}
          {% endfor %}
          {% if category_weeks.size > 0 %}
            {% for week in category_weeks %}
            <button class="tab-button {% if forloop.first %}active{% endif %}" data-week="{{ cat_id }}-week-{{ week.week }}">
              Week {{ week.week }}
            </button>
            {% endfor %}
          {% else %}
            <p><em>No meal plan weeks available for this category.</em></p>
          {% endif %}
        </div>

        <!-- Meal Plan Tables -->
        <div class="meal-plan-table-container">
          {% for week in category_weeks %}
          <div class="meal-plan-table {% if forloop.first %}active{% endif %}" id="{{ cat_id }}-week-{{ week.week }}">
            <table class="meal-plan-table">
              <thead>
                <tr>
                  <th>Day</th>
                  <th>Meal 1</th>
                  <th>Meal 2</th>
                  <th>Meal 3</th>
                  <th>Meal 4</th>
                  <th>Meal 5</th>
                </tr>
              </thead>
              <tbody>
                {% for day in week.days %}
                <tr>
                  <td>{{ day.day }}</td>
                  {% for meal in day.meals %}
                  <td>
                    <img src="{{ meal.image }}" alt="{{ meal.alt | default: meal.name }}" class="meal-image"><br>
                    <strong>{{ meal.name }}</strong><br>
                    <em>Calories: {{ meal.calories }} | Protein: {{ meal.protein }} | Carb: {{ meal.carbs }} | Fat: {{ meal.fat }}</em><br>
                    {{ meal.ingredients | join: ', ' }}
                  </td>
                  {% endfor %}
                  {% assign meal_count = day.meals | size %}
                  {% if meal_count < 5 %}
                    {% for i in (meal_count..4) %}
                      <td></td>
                    {% endfor %}
                  {% endif %}
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</section>